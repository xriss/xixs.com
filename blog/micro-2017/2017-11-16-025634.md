https://twitter.com/pixelvision8/status/930983113542504448 @pixelvision8 If you want an algorithm then a travelling salesman in RGB space has worked well for me.

I just do a simple greedy algo starting from each index and then pick the shortest of these paths as the palette order.